<div class="container">
  <mat-paginator [length]="5"
                 (page)="onPageChange($event)"></mat-paginator>
  <mat-divider></mat-divider>
  <div class="table-container">
    <mat-table #table [dataSource]="dataSource"
               matSort multiTemplateDataRows
               (matSortChange) = "onSortClick($event)">

      <ng-container *ngFor="let colName of getColumnNames()"
                    matColumnDef="{{colName}}">

        <ng-container [ngSwitch]="colName">

          <ng-container *ngSwitchCase="'_checked'" >

            <mat-header-cell class="column_small" *matHeaderCellDef [ngSwitch]="checkState">
              <ng-template [ngSwitchCase]="'All'">
                <mat-icon class="icon material-icons" color="primary"
                          (click)="onHeaderCheckClick();$event.stopPropagation();" >
                  check_box
                </mat-icon>
              </ng-template>
              <ng-template [ngSwitchCase]="'None'">
                <mat-icon class="icon material-icons-outlined"
                          (click)="onHeaderCheckClick();$event.stopPropagation();" >
                  check_box_outline_blank
                </mat-icon>
              </ng-template>
              <ng-template [ngSwitchCase]="'Some'">
                <mat-icon class="icon material-icons" color="primary"
                          (click)="this.onHeaderCheckClick();$event.stopPropagation();" >
                  indeterminate_check_box
                </mat-icon>
              </ng-template>
            </mat-header-cell>

            <mat-cell class="column_small"  *matCellDef="let element;let index = index;">
              <ng-container *ngIf="element._checked; then iconChecked; else iconNotChecked;">
              </ng-container>
              <ng-template #iconChecked>
                <mat-icon class="icon material-icons" color="primary"
                          (click)="onRowCheckClick(index);$event.stopPropagation();">
                  check_box
                </mat-icon>
              </ng-template>
              <ng-template #iconNotChecked>
                <mat-icon class="icon material-icons-outlined"
                          (click)="onRowCheckClick(index);$event.stopPropagation();">
                  check_box_outline_blank
                </mat-icon>
              </ng-template>
            </mat-cell>

          </ng-container>
          <ng-container *ngSwitchCase="'_details'" >

            <mat-header-cell class="column_small" *matHeaderCellDef
                             [ngSwitch]="colName" ></mat-header-cell>

            <!--                  <span class="iconChar"-->
            <!--                        (click)="onRowExpandClick(index);$event.stopPropagation();">-</span>-->
            <mat-cell class="column_small"
                      *matCellDef="let element;"
                      [ngSwitch]="element._details">

              <ng-template [ngSwitchCase]="'No'">
                <span class="iconCharNo">+</span>
              </ng-template>
              <ng-template [ngSwitchCase]="'YesExpanded'">
                <span class="iconChar">-</span>
              </ng-template>
              <ng-template [ngSwitchCase]="'YesCollapsed'">
                <span class="iconChar">+</span>
              </ng-template>
              <ng-template *ngSwitchDefault>
                <span class="iconCharNo">+</span>
              </ng-template>
            </mat-cell>
          </ng-container>
          <ng-container *ngSwitchDefault>

            <mat-header-cell *matHeaderCellDef mat-sort-header >{{colName}}</mat-header-cell>
            <mat-cell *matCellDef="let element;"> {{element[colName]}}</mat-cell>

          </ng-container>

        </ng-container>

      </ng-container>

      <!-- Template for details row -->
      <ng-container matColumnDef='expandedDetail'>
        <!--        <td mat-cell *matCellDef="let element" [attr.colspan]="displayedStudentsColumnsList.length">-->

        <!--          <div class="row student-element-detail" [@detailExpand]="element.isExpanded ? 'expanded' : 'collapsed'">-->
        <!--            <mat-list>-->
        <!--              <div mat-subheader>Subjects of {{element.name}}</div>-->
        <!--              <mat-list-item *ngFor="let subject of element.subjects">-->
        <!--                <div mat-line>{{subject.name}}</div>-->
        <!--                <div mat-line> {{subject.type}} | Grade: {{subject.grade}}</div>-->
        <!--              </mat-list-item>-->
        <!--            </mat-list>-->
        <!--          </div>-->

        <!--        </td>-->
<!--        <mat-cell *matCellDef="let element; let index = index;">-->
        <mat-cell *matCellDef="let element;" [ngSwitch]="element._details">
          <!--          {{element.related_featuretypes.foreignFeatureTypeName}} {{element.related_featuretypes.filter}}-->
          <!--          {{element.fid}}-->
          <!--          {{element.related_featuretypes[0].foreignFeatureTypeName}}-->
          <!--          {{getDetailInfo(index)}}-->
<!--          {{getDetailInfo(element)}}-->
          <ng-template [ngSwitchCase]="'YesExpanded'">
            <div class="row-expanded">{{getDetailsInfo(element)}}</div>
          </ng-template>
          <ng-template [ngSwitchCase]="'YesCollapsed'">
            <div class="row-collapsed"></div>
          </ng-template>
          <ng-template *ngSwitchDefault>
            <div class="row-collapsed"></div>
          </ng-template>
        </mat-cell>
      </ng-container>

      <mat-header-row *matHeaderRowDef="getColumnNames(); sticky: true;"></mat-header-row>
      <mat-row *matRowDef="let row; columns: getColumnNames();"
               (click) = "onRowClicked(row);"></mat-row>

      <!-- Extra row to show detail content column -->
<!--      <mat-row *matRowDef="let row; columns: ['expandedDetail']"-->
<!--               class="getRowDetailClass(row)"></mat-row>-->
      <mat-row *matRowDef="let row; columns: ['expandedDetail']"
               [class]="getRowDetailsClass(row)"></mat-row>

    </mat-table>
  </div>
  <mat-toolbar [style.display]="getFooterBarVisible()">
    <button mat-icon-button>
      <mat-icon>subdirectory_arrow_right</mat-icon>
    </button>
    <button mat-flat-button color="primary"
            (click)="onObjectOptionsClick();">
      <span *ngIf="(nrChecked == 1)">opties voor 1 object</span>
      <span *ngIf="(nrChecked > 1)">opties voor {{nrChecked}} objecten</span>
    </button>
    <!--    <button mat-flat-button color="primary"-->
    <!--            [style.display]="getFooterBarVisible()"-->
    <!--            (click)="onObjectOptionsClick();">-->
    <!--      <span *ngIf="(nrChecked == 1)" [style.display]="getFooterBarVisible()">opties voor 1 object</span>-->
    <!--      <span *ngIf="(nrChecked > 1)" [style.display]="getFooterBarVisible()">opties voor {{nrChecked}} objecten</span>-->
    <!--    </button>-->
  </mat-toolbar>
  <!--  <mat-toolbar *ngIf="(nrChecked > 0)">-->
  <!--    <button mat-icon-button>-->
  <!--      <mat-icon>subdirectory_arrow_right</mat-icon>-->
  <!--    </button>-->
  <!--    <button mat-flat-button color="primary" (click)="onObjectOptionsClick();">-->
  <!--      <span *ngIf="(nrChecked == 1)">opties voor 1 object</span>-->
  <!--      <span *ngIf="(nrChecked > 1)">opties voor {{nrChecked}} objecten</span>-->
  <!--    </button>-->
  <!--  </mat-toolbar>-->
</div>
